jQuery((function($){$(window).on("scroll",(function(){$(this).scrollTop()>100&&!$("#stickyheader").hasClass("open")?$("#stickyheader").addClass("open").slideDown():$(this).scrollTop()<=100&&$("#stickyheader").removeClass("open").slideUp()}));var e=$("#main");e.length||(e=$(".wrapper"));var t=$(".piece-trigger"),n=t.map((function(){return $(this).data("overlay")})).get(),i=null,a=null,r=-1;function o(e){return e.find('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])').filter(":visible")}function l(e){e.length&&(i=e,e.stop(!0,!0).css("display","none").attr("aria-hidden","false").fadeIn(200,(function(){var t=e.find(".overlay-close").first();if(t.length)t.focus();else{var n=o(e);n.length?n.first().focus():e.attr("tabindex","-1").focus()}})))}function f(e){if(n.length){e<0?e=n.length-1:e>=n.length&&(e=0);var t=n[e],a=$("#"+t);if(a.length){var o=i;r=e,o&&o[0]!==a[0]&&o.stop(!0,!0).fadeOut(200,(function(){o.attr("aria-hidden","true").hide()})),l(a)}}}function c(){i&&(i.attr("aria-hidden","true").fadeOut(200,(function(){a&&a.length&&a.focus()})),e.removeAttr("aria-hidden"),i=null,r=-1)}t.on("click",(function(t){t.preventDefault();var i=$(this).data("overlay");if(i){var o=n.indexOf(i);-1===o&&(o=0);var f=$("#"+i);f.length&&function(t,n){t.length&&(a=$(document.activeElement),r=n,e.attr("aria-hidden","true"),l(t))}(f,o)}})),$(".piece-overlay").on("click",".overlay-close",(function(e){e.preventDefault(),c()})),$(".piece-overlay").on("click",(function(e){e.target===this&&c()})),$(".piece-overlay").on("click",".overlay-next",(function(e){if(e.preventDefault(),-1===r&&i){var t=i.attr("id"),a=n.indexOf(t);-1!==a&&(r=a)}-1!==r&&f(r+1)})),$(".piece-overlay").on("click",".overlay-prev",(function(e){if(e.preventDefault(),-1===r&&i){var t=i.attr("id"),a=n.indexOf(t);-1!==a&&(r=a)}-1!==r&&f(r-1)})),$(document).on("keydown",(function(e){if(i){var t="Escape"===e.key||27===e.keyCode,a="Tab"===e.key||9===e.keyCode,l="ArrowRight"===e.key||39===e.keyCode,u="ArrowLeft"===e.key||37===e.keyCode;if(t)return e.preventDefault(),void c();if(l||u){if(e.preventDefault(),-1===r&&i){var d=i.attr("id"),s=n.indexOf(d);-1!==s&&(r=s)}-1!==r&&(l?f(r+1):u&&f(r-1))}else if(a){var v=o(i);if(!v.length)return;var h=v[0],p=v[v.length-1];e.shiftKey?document.activeElement===h&&(e.preventDefault(),p.focus()):document.activeElement===p&&(e.preventDefault(),h.focus())}}}))}));