jQuery((function($){$(window).on("scroll",(function(){$(this).scrollTop()>100&&!$("#stickyheader").hasClass("open")?$("#stickyheader").addClass("open").slideDown():$(this).scrollTop()<=100&&$("#stickyheader").removeClass("open").slideUp()}));var e=$("#main");e.length||(e=$(".wrapper"));var t=$(".piece-trigger"),n=t.map((function(){return $(this).data("overlay")})).get(),a=null,r=null,i=-1;function o(e){return e.find('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])').filter(":visible")}function l(e){e.length&&(a=e,e.stop(!0,!0).css("display","none").attr("aria-hidden","false").fadeIn(200,(function(){var t=e.find(".overlay-close").first();if(t.length)t.focus();else{var n=o(e);n.length?n.first().focus():e.attr("tabindex","-1").focus()}})))}function f(e){if(n.length){e<0?e=n.length-1:e>=n.length&&(e=0);var t=n[e],r=$("#"+t);if(r.length){var o=a;i=e,o&&o[0]!==r[0]&&o.stop(!0,!0).fadeOut(200,(function(){o.attr("aria-hidden","true").hide()})),l(r)}}}function c(){a&&(a.attr("aria-hidden","true").fadeOut(200,(function(){r&&r.length&&r.focus()})),e.removeAttr("aria-hidden"),a=null,i=-1)}t.on("click",(function(t){t.preventDefault();var a=$(this).data("overlay");if(a){var o=n.indexOf(a);-1===o&&(o=0);var f=$("#"+a);f.length&&function(t,n){t.length&&(r=$(document.activeElement),i=n,e.attr("aria-hidden","true"),l(t))}(f,o)}})),$(".piece-overlay").on("click",".overlay-close",(function(e){e.preventDefault(),c()})),$(".piece-overlay").on("click",(function(e){e.target===this&&c()})),$(".piece-overlay").on("click",".overlay-next",(function(e){if(e.preventDefault(),-1===i&&a){var t=a.attr("id"),r=n.indexOf(t);-1!==r&&(i=r)}-1!==i&&f(i+1)})),$(".piece-overlay").on("click",".overlay-prev",(function(e){if(e.preventDefault(),-1===i&&a){var t=a.attr("id"),r=n.indexOf(t);-1!==r&&(i=r)}-1!==i&&f(i-1)})),$(document).on("keydown",(function(e){if(a){var t="Escape"===e.key||27===e.keyCode,r="Tab"===e.key||9===e.keyCode,l="ArrowRight"===e.key||39===e.keyCode,s="ArrowLeft"===e.key||37===e.keyCode;if(t)return e.preventDefault(),void c();if(l||s){if(e.preventDefault(),-1===i&&a){var d=a.attr("id"),u=n.indexOf(d);-1!==u&&(i=u)}-1!==i&&(l?f(i+1):s&&f(i-1))}else if(r){var v=o(a);if(!v.length)return;var h=v[0],p=v[v.length-1];e.shiftKey?document.activeElement===h&&(e.preventDefault(),p.focus()):document.activeElement===p&&(e.preventDefault(),h.focus())}}}));var s=$(".parallax-img");s.length&&(s.css("transform","translate(-50%, 0)"),$(window).on("scroll.parallax",(function(){if(window.innerWidth<890)s.css("transform","translate(-50%, 0)");else{var e=.3*$(this).scrollTop();s.css("transform","translate(-50%, "+e+"px)")}})),$(window).on("resize.parallax",(function(){window.innerWidth<890&&s.css("transform","translate(-50%, 0)")})).trigger("resize.parallax"))}));